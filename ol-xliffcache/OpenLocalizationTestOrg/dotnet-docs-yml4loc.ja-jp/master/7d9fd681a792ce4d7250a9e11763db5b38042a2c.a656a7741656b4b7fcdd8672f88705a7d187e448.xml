{"nodes":[{"content":"This class allows both <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> to participate in persistence process. A persistence participant derives from the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class or the <xref href=\"System.Activities.Persistence.PersistenceIOParticipant\"></xref> class (derived class of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class), implements abstract methods, and then add an instance of the class as a workflow instance extension. The <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> look for such extensions when persisting an instance and invoke appropriate methods at appropriate times.","nodes":[{"pos":[0,836],"content":"This class allows both <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> to participate in persistence process. A persistence participant derives from the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class or the <xref href=\"System.Activities.Persistence.PersistenceIOParticipant\"></xref> class (derived class of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class), implements abstract methods, and then add an instance of the class as a workflow instance extension. The <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> look for such extensions when persisting an instance and invoke appropriate methods at appropriate times.","nodes":[{"content":"This class allows both <ph id=\"ph1\">&lt;xref href=\"System.Activities.WorkflowApplication\"&gt;&lt;/xref&gt;</ph> and <ph id=\"ph2\">&lt;xref href=\"System.ServiceModel.WorkflowServiceHost\"&gt;&lt;/xref&gt;</ph> to participate in persistence process.","pos":[0,185],"source":"This class allows both <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> to participate in persistence process."},{"content":"A persistence participant derives from the <ph id=\"ph1\">&lt;xref href=\"System.Activities.Persistence.PersistenceParticipant\"&gt;&lt;/xref&gt;</ph> class or the <ph id=\"ph2\">&lt;xref href=\"System.Activities.Persistence.PersistenceIOParticipant\"&gt;&lt;/xref&gt;</ph> class (derived class of the <ph id=\"ph3\">&lt;xref href=\"System.Activities.Persistence.PersistenceParticipant\"&gt;&lt;/xref&gt;</ph> class), implements abstract methods, and then add an instance of the class as a workflow instance extension.","pos":[186,602],"source":" A persistence participant derives from the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class or the <xref href=\"System.Activities.Persistence.PersistenceIOParticipant\"></xref> class (derived class of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class), implements abstract methods, and then add an instance of the class as a workflow instance extension."},{"content":"The <ph id=\"ph1\">&lt;xref href=\"System.Activities.WorkflowApplication\"&gt;&lt;/xref&gt;</ph> and <ph id=\"ph2\">&lt;xref href=\"System.ServiceModel.WorkflowServiceHost\"&gt;&lt;/xref&gt;</ph> look for such extensions when persisting an instance and invoke appropriate methods at appropriate times.","pos":[603,836],"source":" The <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> look for such extensions when persisting an instance and invoke appropriate methods at appropriate times."}]}],"pos":[1121,1958],"yaml":true},{"content":"A host executes the following steps (or stages) when persisting an instance:  \n  \n1.  Collects values to be persisted.  \n  \n2.  Maps fields of monolithic structured values to individual values.  \n  \n3.  Issues the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand> to the persistence provider.  \n  \n4.  Performs I/O under the persistence transaction.  \n  \n A host completes a stage before beginning the next stage. For example when persisting, the host collects values from all the persistence participants before moving to the second stage. In the second stage, the host provides all the values collected in the first stage to all persistence participants in the second stage for mapping. In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>. Then in the fourth stage, the host provides all the collected values to all the persistence IO participants under the persistence transaction.  \n  \n A host executes the following stages when loading a persistence instance:  \n  \n1.  Issues the <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.LoadWorkflowByInstanceKeyCommand> to the persistence provider.  \n  \n2.  Performs I/O under the persistence transaction.  \n  \n3.  Publishes the loaded values.  \n  \n At the highest level, workflow instance extensions that derive from the <xref:System.Activities.Persistence.PersistenceParticipant> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process.  Workflow instance extensions deriving from the PersistenceIOParticipant class can additionally participate in the fourth stage of the persisting process and the second stage of the loading process (I/O).","nodes":[{"pos":[0,76],"content":"A host executes the following steps (or stages) when persisting an instance:","nodes":[{"content":"A host executes the following steps (or stages) when persisting an instance:","pos":[0,76]}]},{"pos":[86,118],"content":"Collects values to be persisted.","nodes":[{"content":"Collects values to be persisted.","pos":[0,32]}]},{"pos":[128,193],"content":"Maps fields of monolithic structured values to individual values.","nodes":[{"content":"Maps fields of monolithic structured values to individual values.","pos":[0,65]}]},{"pos":[203,305],"content":"Issues the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand> to the persistence provider.","nodes":[{"content":"Issues the <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.SaveWorkflowCommand&gt;</ph> to the persistence provider.","pos":[0,102],"source":"Issues the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand> to the persistence provider."}]},{"pos":[315,362],"content":"Performs I/O under the persistence transaction.","nodes":[{"content":"Performs I/O under the persistence transaction.","pos":[0,47]}]},{"pos":[369,1048],"content":"A host completes a stage before beginning the next stage. For example when persisting, the host collects values from all the persistence participants before moving to the second stage. In the second stage, the host provides all the values collected in the first stage to all persistence participants in the second stage for mapping. In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>. Then in the fourth stage, the host provides all the collected values to all the persistence IO participants under the persistence transaction.","nodes":[{"content":"A host completes a stage before beginning the next stage. For example when persisting, the host collects values from all the persistence participants before moving to the second stage. In the second stage, the host provides all the values collected in the first stage to all persistence participants in the second stage for mapping. In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>. Then in the fourth stage, the host provides all the collected values to all the persistence IO participants under the persistence transaction.","pos":[0,679],"nodes":[{"content":"A host completes a stage before beginning the next stage.","pos":[0,57]},{"content":"For example when persisting, the host collects values from all the persistence participants before moving to the second stage.","pos":[58,184]},{"content":"In the second stage, the host provides all the values collected in the first stage to all persistence participants in the second stage for mapping.","pos":[185,332]},{"content":"In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.SaveWorkflowCommand&gt;</ph>.","pos":[333,536],"source":" In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>."},{"content":"Then in the fourth stage, the host provides all the collected values to all the persistence IO participants under the persistence transaction.","pos":[537,679]}]}]},{"pos":[1055,1128],"content":"A host executes the following stages when loading a persistence instance:","nodes":[{"content":"A host executes the following stages when loading a persistence instance:","pos":[0,73]}]},{"pos":[1138,1320],"content":"Issues the <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.LoadWorkflowByInstanceKeyCommand> to the persistence provider.","nodes":[{"content":"Issues the <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.LoadWorkflowCommand&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Activities.DurableInstancing.LoadWorkflowByInstanceKeyCommand&gt;</ph> to the persistence provider.","pos":[0,182],"source":"Issues the <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.LoadWorkflowByInstanceKeyCommand> to the persistence provider."}]},{"pos":[1330,1377],"content":"Performs I/O under the persistence transaction.","nodes":[{"content":"Performs I/O under the persistence transaction.","pos":[0,47]}]},{"pos":[1387,1415],"content":"Publishes the loaded values.","nodes":[{"content":"Publishes the loaded values.","pos":[0,28]}]},{"pos":[1422,1899],"content":"At the highest level, workflow instance extensions that derive from the <xref:System.Activities.Persistence.PersistenceParticipant> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process.  Workflow instance extensions deriving from the PersistenceIOParticipant class can additionally participate in the fourth stage of the persisting process and the second stage of the loading process (I/O).","nodes":[{"content":"At the highest level, workflow instance extensions that derive from the <xref:System.Activities.Persistence.PersistenceParticipant> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process.  Workflow instance extensions deriving from the PersistenceIOParticipant class can additionally participate in the fourth stage of the persisting process and the second stage of the loading process (I/O).","pos":[0,477],"nodes":[{"content":"At the highest level, workflow instance extensions that derive from the <ph id=\"ph1\">&lt;xref:System.Activities.Persistence.PersistenceParticipant&gt;</ph> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process.","pos":[0,272],"source":"At the highest level, workflow instance extensions that derive from the <xref:System.Activities.Persistence.PersistenceParticipant> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process."},{"content":"Workflow instance extensions deriving from the PersistenceIOParticipant class can additionally participate in the fourth stage of the persisting process and the second stage of the loading process (I/O).","pos":[274,477]}]}]}],"pos":[1969,3891],"yaml":true,"extradata":"MT"},{"content":"Initializes an instance of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class.","nodes":[{"pos":[0,111],"content":"Initializes an instance of the <ph id=\"ph1\">&lt;xref href=\"System.Activities.Persistence.PersistenceParticipant\"&gt;&lt;/xref&gt;</ph> class.","source":"Initializes an instance of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class."}],"pos":[5924,6036],"yaml":true},{"content":"A host invokes this method on a custom persistence participant to collect read-write values and write-only values, to be persisted.","nodes":[{"pos":[0,131],"content":"A host invokes this method on a custom persistence participant to collect read-write values and write-only values, to be persisted.","nodes":[{"content":"A host invokes this method on a custom persistence participant to collect read-write values and write-only values, to be persisted.","pos":[0,131]}]}],"pos":[8318,8450],"yaml":true},{"content":"The host packages read-write values in the first dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects of an <xref:System.Activities.DurableInstancing.SaveWorkflowCommand.InstanceData*> collection, and packages write-only values in the second dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects with <xref:System.Runtime.DurableInstancing.InstanceValueOptions.Optional> and <xref:System.Runtime.DurableInstancing.InstanceValueOptions.WriteOnly> flags set. [!INCLUDE[crdefault](~/includes/crdefault-md.md)] <xref:System.Runtime.DurableInstancing.InstanceValueOptions>.  \n  \n> [!IMPORTANT]\n>  Each value provided by implementations of <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> across all persistence participants within one persistence episode must have a unique XName.","nodes":[{"pos":[0,613],"content":"The host packages read-write values in the first dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects of an <xref:System.Activities.DurableInstancing.SaveWorkflowCommand.InstanceData*> collection, and packages write-only values in the second dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects with <xref:System.Runtime.DurableInstancing.InstanceValueOptions.Optional> and <xref:System.Runtime.DurableInstancing.InstanceValueOptions.WriteOnly> flags set. [!INCLUDE[crdefault](~/includes/crdefault-md.md)] <xref:System.Runtime.DurableInstancing.InstanceValueOptions>.","nodes":[{"content":"The host packages read-write values in the first dictionary as <ph id=\"ph1\">&lt;xref:System.Runtime.DurableInstancing.InstanceValue&gt;</ph> objects of an <ph id=\"ph2\">&lt;xref:System.Activities.DurableInstancing.SaveWorkflowCommand.InstanceData*&gt;</ph> collection, and packages write-only values in the second dictionary as <ph id=\"ph3\">&lt;xref:System.Runtime.DurableInstancing.InstanceValue&gt;</ph> objects with <ph id=\"ph4\">&lt;xref:System.Runtime.DurableInstancing.InstanceValueOptions.Optional&gt;</ph> and <ph id=\"ph5\">&lt;xref:System.Runtime.DurableInstancing.InstanceValueOptions.WriteOnly&gt;</ph> flags set.","pos":[0,501],"source":"The host packages read-write values in the first dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects of an <xref:System.Activities.DurableInstancing.SaveWorkflowCommand.InstanceData*> collection, and packages write-only values in the second dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects with <xref:System.Runtime.DurableInstancing.InstanceValueOptions.Optional> and <xref:System.Runtime.DurableInstancing.InstanceValueOptions.WriteOnly> flags set."},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](~/includes/crdefault-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Runtime.DurableInstancing.InstanceValueOptions&gt;</ph>.","pos":[502,613],"source":"[!INCLUDE[crdefault](~/includes/crdefault-md.md)] <xref:System.Runtime.DurableInstancing.InstanceValueOptions>."}]},{"pos":[621,848],"content":"[!IMPORTANT]\n Each value provided by implementations of <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> across all persistence participants within one persistence episode must have a unique XName.","leadings":["","> "],"nodes":[{"content":"Each value provided by implementations of <ph id=\"ph1\">&lt;xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A&gt;</ph> across all persistence participants within one persistence episode must have a unique XName.","pos":[14,225],"source":" Each value provided by implementations of <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> across all persistence participants within one persistence episode must have a unique XName."}]}],"pos":[8461,9315],"yaml":true,"extradata":"MT"},{"content":"The read-write values to be persisted.","nodes":[{"pos":[0,38],"content":"The read-write values to be persisted.","nodes":[{"content":"The read-write values to be persisted.","pos":[0,38]}]}],"pos":[10158,10197],"yaml":true},{"content":"The write-only values to be persisted.","nodes":[{"pos":[0,38],"content":"The write-only values to be persisted.","nodes":[{"content":"The write-only values to be persisted.","pos":[0,38]}]}],"pos":[10330,10369],"yaml":true},{"content":"A host invokes this method after it is done with collecting the values in the first stage. The host forwards two read-only dictionaries of values it collected from all persistence participants during the first stage (CollectValues stage) to this method for mapping. The host adds values in the dictionary returned by this method to the collection of write-only values.","nodes":[{"pos":[0,368],"content":"A host invokes this method after it is done with collecting the values in the first stage. The host forwards two read-only dictionaries of values it collected from all persistence participants during the first stage (CollectValues stage) to this method for mapping. The host adds values in the dictionary returned by this method to the collection of write-only values.","nodes":[{"content":"A host invokes this method after it is done with collecting the values in the first stage. The host forwards two read-only dictionaries of values it collected from all persistence participants during the first stage (CollectValues stage) to this method for mapping. The host adds values in the dictionary returned by this method to the collection of write-only values.","pos":[0,368],"nodes":[{"content":"A host invokes this method after it is done with collecting the values in the first stage.","pos":[0,90]},{"content":"The host forwards two read-only dictionaries of values it collected from all persistence participants during the first stage (CollectValues stage) to this method for mapping.","pos":[91,265]},{"content":"The host adds values in the dictionary returned by this method to the collection of write-only values.","pos":[266,368]}]}]}],"pos":[12099,12468],"yaml":true},{"content":"Each value provided by implementations of all the <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> methods across all persistence participants including all the values collected in the first stage (CollectValues stage) must have a unique XName.","nodes":[{"pos":[0,268],"content":"Each value provided by implementations of all the <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> methods across all persistence participants including all the values collected in the first stage (CollectValues stage) must have a unique XName.","nodes":[{"content":"Each value provided by implementations of all the <ph id=\"ph1\">&lt;xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A&gt;</ph> methods across all persistence participants including all the values collected in the first stage (CollectValues stage) must have a unique XName.","pos":[0,268],"source":"Each value provided by implementations of all the <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> methods across all persistence participants including all the values collected in the first stage (CollectValues stage) must have a unique XName."}]}],"pos":[12479,12748],"yaml":true,"extradata":"MT"},{"content":"The read-write values to be persisted.","nodes":[{"pos":[0,38],"content":"The read-write values to be persisted.","nodes":[{"content":"The read-write values to be persisted.","pos":[0,38]}]}],"pos":[13642,13681],"yaml":true},{"content":"The write-only values to be persisted.","nodes":[{"pos":[0,38],"content":"The write-only values to be persisted.","nodes":[{"content":"The write-only values to be persisted.","pos":[0,38]}]}],"pos":[13814,13853],"yaml":true},{"content":"A dictionary containing additional write-only values to be persisted.","nodes":[{"pos":[0,69],"content":"A dictionary containing additional write-only values to be persisted.","nodes":[{"content":"A dictionary containing additional write-only values to be persisted.","pos":[0,69]}]}],"pos":[13972,14042],"yaml":true},{"content":"The host invokes this method and passes all the loaded values in the <xref href=\"System.Activities.Persistence.SaveWorkflowCommand.InstanceData\"></xref> collection (filled by the <xref href=\"System.Activities.Persistence.LoadWorkflowCommand\"></xref> or <xref href=\"System.Activities.Persistence.LoadWorkflowByInstanceKeyCommand\"></xref>) as a dictionary parameter.","nodes":[{"pos":[0,364],"content":"The host invokes this method and passes all the loaded values in the <ph id=\"ph1\">&lt;xref href=\"System.Activities.Persistence.SaveWorkflowCommand.InstanceData\"&gt;&lt;/xref&gt;</ph> collection (filled by the <ph id=\"ph2\">&lt;xref href=\"System.Activities.Persistence.LoadWorkflowCommand\"&gt;&lt;/xref&gt;</ph> or <ph id=\"ph3\">&lt;xref href=\"System.Activities.Persistence.LoadWorkflowByInstanceKeyCommand\"&gt;&lt;/xref&gt;</ph>) as a dictionary parameter.","source":"The host invokes this method and passes all the loaded values in the <xref href=\"System.Activities.Persistence.SaveWorkflowCommand.InstanceData\"></xref> collection (filled by the <xref href=\"System.Activities.Persistence.LoadWorkflowCommand\"></xref> or <xref href=\"System.Activities.Persistence.LoadWorkflowByInstanceKeyCommand\"></xref>) as a dictionary parameter."}],"pos":[15483,15848],"yaml":true},{"content":"The read-write values that were loaded from the persistence store. This dictionary corresponds to the dictionary of read-write values persisted in the most recent persistence episode.","nodes":[{"pos":[0,183],"content":"The read-write values that were loaded from the persistence store. This dictionary corresponds to the dictionary of read-write values persisted in the most recent persistence episode.","nodes":[{"content":"The read-write values that were loaded from the persistence store. This dictionary corresponds to the dictionary of read-write values persisted in the most recent persistence episode.","pos":[0,183],"nodes":[{"content":"The read-write values that were loaded from the persistence store.","pos":[0,66]},{"content":"This dictionary corresponds to the dictionary of read-write values persisted in the most recent persistence episode.","pos":[67,183]}]}]}],"pos":[16611,16795],"yaml":true}],"content":"### YamlMime:ManagedReference\nitems:\n- uid: System.Activities.Persistence.PersistenceParticipant\n  commentId: T:System.Activities.Persistence.PersistenceParticipant\n  id: PersistenceParticipant\n  children:\n  - System.Activities.Persistence.PersistenceParticipant.#ctor\n  - System.Activities.Persistence.PersistenceParticipant.CollectValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@,System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@)\n  - System.Activities.Persistence.PersistenceParticipant.MapValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object},System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  - System.Activities.Persistence.PersistenceParticipant.PublishValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  langs:\n  - csharp\n  name: PersistenceParticipant\n  nameWithType: PersistenceParticipant\n  fullName: System.Activities.Persistence.PersistenceParticipant\n  type: Class\n  assemblies:\n  - System.Activities\n  namespace: System.Activities.Persistence\n  summary: This class allows both <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> to participate in persistence process. A persistence participant derives from the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class or the <xref href=\"System.Activities.Persistence.PersistenceIOParticipant\"></xref> class (derived class of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class), implements abstract methods, and then add an instance of the class as a workflow instance extension. The <xref href=\"System.Activities.WorkflowApplication\"></xref> and <xref href=\"System.ServiceModel.WorkflowServiceHost\"></xref> look for such extensions when persisting an instance and invoke appropriate methods at appropriate times.\n  remarks: \"A host executes the following steps (or stages) when persisting an instance:  \\n  \\n1.  Collects values to be persisted.  \\n  \\n2.  Maps fields of monolithic structured values to individual values.  \\n  \\n3.  Issues the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand> to the persistence provider.  \\n  \\n4.  Performs I/O under the persistence transaction.  \\n  \\n A host completes a stage before beginning the next stage. For example when persisting, the host collects values from all the persistence participants before moving to the second stage. In the second stage, the host provides all the values collected in the first stage to all persistence participants in the second stage for mapping. In the third stage, the host provides all the collected values in the first and second stages to the persistence provider when invoking the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>. Then in the fourth stage, the host provides all the collected values to all the persistence IO participants under the persistence transaction.  \\n  \\n A host executes the following stages when loading a persistence instance:  \\n  \\n1.  Issues the <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.LoadWorkflowByInstanceKeyCommand> to the persistence provider.  \\n  \\n2.  Performs I/O under the persistence transaction.  \\n  \\n3.  Publishes the loaded values.  \\n  \\n At the highest level, workflow instance extensions that derive from the <xref:System.Activities.Persistence.PersistenceParticipant> class can participate in the first (Collect) and second (Map) stages of persisting process and the third stage (Publish) of loading process.  Workflow instance extensions deriving from the PersistenceIOParticipant class can additionally participate in the fourth stage of the persisting process and the second stage of the loading process (I/O).\"\n  example:\n  - \"The following code sample demonstrates creating a class that derives from <xref:System.Activities.Persistence.PersistenceParticipant>. This example is from the [Hiring Process](~/docs/framework/windows-workflow-foundation/samples/hiring-process.md) sample.  \\n  \\n [!code-csharp[wfs_HiringRequestProcess#1](~/samples/snippets/csharp/VS_Snippets_CFX/wfs_hiringrequestprocess/cs/hiringrequestpersistenceparticipant.cs#1)]\"\n  syntax:\n    content: public abstract class PersistenceParticipant\n  inheritance:\n  - System.Object\n  derivedClasses:\n  - System.Activities.Persistence.PersistenceIOParticipant\n  - System.Activities.Statements.CompensationExtension\n  implements: []\n  inheritedMembers:\n  - System.Object.Equals(System.Object)\n  - System.Object.Equals(System.Object,System.Object)\n  - System.Object.GetHashCode\n  - System.Object.GetType\n  - System.Object.MemberwiseClone\n  - System.Object.ReferenceEquals(System.Object,System.Object)\n  - System.Object.ToString\n  version:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n  ms.technology:\n  - dotnet-standard\n  author: Erikre\n  ms.author: erikre\n  manager: erikre\n- uid: System.Activities.Persistence.PersistenceParticipant.#ctor\n  commentId: M:System.Activities.Persistence.PersistenceParticipant.#ctor\n  id: '#ctor'\n  parent: System.Activities.Persistence.PersistenceParticipant\n  langs:\n  - csharp\n  name: PersistenceParticipant()\n  nameWithType: PersistenceParticipant.PersistenceParticipant()\n  fullName: PersistenceParticipant.PersistenceParticipant()\n  type: Constructor\n  assemblies:\n  - System.Activities\n  namespace: System.Activities.Persistence\n  summary: Initializes an instance of the <xref href=\"System.Activities.Persistence.PersistenceParticipant\"></xref> class.\n  remarks: ''\n  example:\n  - \"The following code sample demonstrates creating a class that derives from <xref:System.Activities.Persistence.PersistenceParticipant>. This example is from the [Hiring Process](~/docs/framework/windows-workflow-foundation/samples/hiring-process.md) sample.  \\n  \\n [!code-csharp[wfs_HiringRequestProcess#1](~/samples/snippets/csharp/VS_Snippets_CFX/wfs_hiringrequestprocess/cs/hiringrequestpersistenceparticipant.cs#1)]\"\n  syntax:\n    content: protected PersistenceParticipant ();\n    parameters: []\n  overload: System.Activities.Persistence.PersistenceParticipant.#ctor*\n  exceptions: []\n  version:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n  ms.technology:\n  - dotnet-standard\n  author: Erikre\n  ms.author: erikre\n  manager: erikre\n- uid: System.Activities.Persistence.PersistenceParticipant.CollectValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@,System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@)\n  commentId: M:System.Activities.Persistence.PersistenceParticipant.CollectValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@,System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@)\n  id: CollectValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@,System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@)\n  parent: System.Activities.Persistence.PersistenceParticipant\n  langs:\n  - csharp\n  name: CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  type: Method\n  assemblies:\n  - System.Activities\n  namespace: System.Activities.Persistence\n  summary: A host invokes this method on a custom persistence participant to collect read-write values and write-only values, to be persisted.\n  remarks: \"The host packages read-write values in the first dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects of an <xref:System.Activities.DurableInstancing.SaveWorkflowCommand.InstanceData*> collection, and packages write-only values in the second dictionary as <xref:System.Runtime.DurableInstancing.InstanceValue> objects with <xref:System.Runtime.DurableInstancing.InstanceValueOptions.Optional> and <xref:System.Runtime.DurableInstancing.InstanceValueOptions.WriteOnly> flags set. [!INCLUDE[crdefault](~/includes/crdefault-md.md)] <xref:System.Runtime.DurableInstancing.InstanceValueOptions>.  \\n  \\n> [!IMPORTANT]\\n>  Each value provided by implementations of <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> across all persistence participants within one persistence episode must have a unique XName.\"\n  example:\n  - \"The following code sample demonstrates using CollectValues in a class that derives from <xref:System.Activities.Persistence.PersistenceParticipant>. This example is from the [Persistence Participants](~/docs/framework/windows-workflow-foundation/persistence-participants.md) sample.  \\n  \\n [!code-csharp[wfs_PersistenceParticipants#2](~/samples/snippets/csharp/VS_Snippets_CFX/wfs_persistenceparticipants/cs/stepcountextension.cs#2)]\"\n  syntax:\n    content: protected virtual void CollectValues (out System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> readWriteValues, out System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> writeOnlyValues);\n    parameters:\n    - id: readWriteValues\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: The read-write values to be persisted.\n    - id: writeOnlyValues\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: The write-only values to be persisted.\n  overload: System.Activities.Persistence.PersistenceParticipant.CollectValues*\n  exceptions: []\n  version:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n  ms.technology:\n  - dotnet-standard\n  author: Erikre\n  ms.author: erikre\n  manager: erikre\n- uid: System.Activities.Persistence.PersistenceParticipant.MapValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object},System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  commentId: M:System.Activities.Persistence.PersistenceParticipant.MapValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object},System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  id: MapValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object},System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  parent: System.Activities.Persistence.PersistenceParticipant\n  langs:\n  - csharp\n  name: MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  type: Method\n  assemblies:\n  - System.Activities\n  namespace: System.Activities.Persistence\n  summary: A host invokes this method after it is done with collecting the values in the first stage. The host forwards two read-only dictionaries of values it collected from all persistence participants during the first stage (CollectValues stage) to this method for mapping. The host adds values in the dictionary returned by this method to the collection of write-only values.\n  remarks: Each value provided by implementations of all the <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> methods across all persistence participants including all the values collected in the first stage (CollectValues stage) must have a unique XName.\n  example:\n  - \"The following code sample demonstrates using MapValues in a class that derives from <xref:System.Activities.Persistence.PersistenceParticipant>. This example is from the [Corporate Purchase Process](~/docs/framework/windows-workflow-foundation/samples/corporate-purchase-process.md) sample.  \\n  \\n [!code-csharp[wfs_PurchaseProcess#2](~/samples/snippets/csharp/VS_Snippets_CFX/wfs_purchaseprocess/cs/xmlpersistenceparticipant.cs#2)]\"\n  syntax:\n    content: protected virtual System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> MapValues (System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> readWriteValues, System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> writeOnlyValues);\n    parameters:\n    - id: readWriteValues\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: The read-write values to be persisted.\n    - id: writeOnlyValues\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: The write-only values to be persisted.\n    return:\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: A dictionary containing additional write-only values to be persisted.\n  overload: System.Activities.Persistence.PersistenceParticipant.MapValues*\n  exceptions: []\n  version:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n  ms.technology:\n  - dotnet-standard\n  author: Erikre\n  ms.author: erikre\n  manager: erikre\n- uid: System.Activities.Persistence.PersistenceParticipant.PublishValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  commentId: M:System.Activities.Persistence.PersistenceParticipant.PublishValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  id: PublishValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  parent: System.Activities.Persistence.PersistenceParticipant\n  langs:\n  - csharp\n  name: PublishValues(IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.PublishValues(IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.PublishValues(IDictionary<XName,Object>)\n  type: Method\n  assemblies:\n  - System.Activities\n  namespace: System.Activities.Persistence\n  summary: The host invokes this method and passes all the loaded values in the <xref href=\"System.Activities.Persistence.SaveWorkflowCommand.InstanceData\"></xref> collection (filled by the <xref href=\"System.Activities.Persistence.LoadWorkflowCommand\"></xref> or <xref href=\"System.Activities.Persistence.LoadWorkflowByInstanceKeyCommand\"></xref>) as a dictionary parameter.\n  remarks: ''\n  example:\n  - \"The following code sample demonstrates using PublishValues in a class that derives from <xref:System.Activities.Persistence.PersistenceParticipant>. This example is from the [Persistence Participants](~/docs/framework/windows-workflow-foundation/persistence-participants.md) sample.  \\n  \\n [!code-csharp[wfs_PersistenceParticipants#2](~/samples/snippets/csharp/VS_Snippets_CFX/wfs_persistenceparticipants/cs/stepcountextension.cs#2)]\"\n  syntax:\n    content: protected virtual void PublishValues (System.Collections.Generic.IDictionary<System.Xml.Linq.XName,object> readWriteValues);\n    parameters:\n    - id: readWriteValues\n      type: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n      description: The read-write values that were loaded from the persistence store. This dictionary corresponds to the dictionary of read-write values persisted in the most recent persistence episode.\n  overload: System.Activities.Persistence.PersistenceParticipant.PublishValues*\n  exceptions: []\n  version:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n  ms.technology:\n  - dotnet-standard\n  author: Erikre\n  ms.author: erikre\n  manager: erikre\nreferences:\n- uid: System.Object\n  parent: System\n  isExternal: false\n  name: Object\n  nameWithType: Object\n  fullName: System.Object\n- uid: System.Activities.Persistence.PersistenceParticipant.#ctor\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: PersistenceParticipant()\n  nameWithType: PersistenceParticipant.PersistenceParticipant()\n  fullName: PersistenceParticipant.PersistenceParticipant()\n- uid: System.Activities.Persistence.PersistenceParticipant.CollectValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@,System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}@)\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.CollectValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n- uid: System.Collections.Generic.IDictionary`2\n  name: IDictionary<TKey,TValue>\n  nameWithType: IDictionary<TKey,TValue>\n  fullName: System.Collections.Generic.IDictionary<TKey,TValue>\n- uid: System.Xml.Linq.XName\n  name: XName\n  nameWithType: XName\n  fullName: System.Xml.Linq.XName\n- uid: System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object}\n  parent: System.Collections.Generic\n  isExternal: false\n  name: IDictionary<XName,Object>\n  nameWithType: IDictionary<XName,Object>\n  fullName: System.Collections.Generic.IDictionary<System.Xml.Linq.XName,System.Object>\n  spec.csharp:\n  - uid: System.Collections.Generic.IDictionary`2\n    name: IDictionary\n    nameWithType: IDictionary\n    fullName: System.Collections.Generic.IDictionary\n  - name: <\n    nameWithType: <\n    fullName: <\n  - uid: System.Xml.Linq.XName\n    name: XName\n    nameWithType: XName\n    fullName: System.Xml.Linq.XName\n  - name: ','\n    nameWithType: ','\n    fullName: ','\n  - uid: System.Object\n    name: Object\n    nameWithType: Object\n    fullName: System.Object\n  - name: '>'\n    nameWithType: '>'\n    fullName: '>'\n- uid: System.Activities.Persistence.PersistenceParticipant.MapValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object},System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.MapValues(IDictionary<XName,Object>, IDictionary<XName,Object>)\n- uid: System.Activities.Persistence.PersistenceParticipant.PublishValues(System.Collections.Generic.IDictionary{System.Xml.Linq.XName,System.Object})\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: PublishValues(IDictionary<XName,Object>)\n  nameWithType: PersistenceParticipant.PublishValues(IDictionary<XName,Object>)\n  fullName: PersistenceParticipant.PublishValues(IDictionary<XName,Object>)\n- uid: System.Activities.Persistence.PersistenceParticipant.#ctor*\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: PersistenceParticipant\n  nameWithType: PersistenceParticipant.PersistenceParticipant\n  fullName: PersistenceParticipant.PersistenceParticipant\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n- uid: System.Activities.Persistence.PersistenceParticipant.CollectValues*\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: CollectValues\n  nameWithType: PersistenceParticipant.CollectValues\n  fullName: PersistenceParticipant.CollectValues\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n- uid: System.Activities.Persistence.PersistenceParticipant.MapValues*\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: MapValues\n  nameWithType: PersistenceParticipant.MapValues\n  fullName: PersistenceParticipant.MapValues\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n- uid: System.Activities.Persistence.PersistenceParticipant.PublishValues*\n  parent: System.Activities.Persistence.PersistenceParticipant\n  isExternal: false\n  name: PublishValues\n  nameWithType: PersistenceParticipant.PublishValues\n  fullName: PersistenceParticipant.PublishValues\n  monikers:\n  - netframework-4.5.1\n  - netframework-4.5.2\n  - netframework-4.5\n  - netframework-4.6.1\n  - netframework-4.6.2\n  - netframework-4.6\n  - netframework-4.7\n  content_git_url: https://github.com/dotnet/docs/blob/master/xml/System.Activities.Persistence/PersistenceParticipant.xml\n- uid: System.Object.Equals(System.Object)\n  parent: System.Object\n  isExternal: false\n  name: Equals(Object)\n  nameWithType: Object.Equals(Object)\n  fullName: Object.Equals(Object)\n- uid: System.Object.Equals(System.Object,System.Object)\n  parent: System.Object\n  isExternal: false\n  name: Equals(Object, Object)\n  nameWithType: Object.Equals(Object, Object)\n  fullName: Object.Equals(Object, Object)\n- uid: System.Object.GetHashCode\n  parent: System.Object\n  isExternal: false\n  name: GetHashCode()\n  nameWithType: Object.GetHashCode()\n  fullName: Object.GetHashCode()\n- uid: System.Object.GetType\n  parent: System.Object\n  isExternal: false\n  name: GetType()\n  nameWithType: Object.GetType()\n  fullName: Object.GetType()\n- uid: System.Object.MemberwiseClone\n  parent: System.Object\n  isExternal: false\n  name: MemberwiseClone()\n  nameWithType: Object.MemberwiseClone()\n  fullName: Object.MemberwiseClone()\n- uid: System.Object.ReferenceEquals(System.Object,System.Object)\n  parent: System.Object\n  isExternal: false\n  name: ReferenceEquals(Object, Object)\n  nameWithType: Object.ReferenceEquals(Object, Object)\n  fullName: Object.ReferenceEquals(Object, Object)\n- uid: System.Object.ToString\n  parent: System.Object\n  isExternal: false\n  name: ToString()\n  nameWithType: Object.ToString()\n  fullName: Object.ToString()\n"}